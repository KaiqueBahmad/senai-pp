plugins {
    id 'java'
    id 'application'
}

// Configure source sets for both assignments
sourceSets {
    main {
        java {
            srcDirs = ['at1-singleton/src', 'at2-adapter/src']
        }
    }
}

// Project configurations
repositories {
    mavenCentral()
}

dependencies {
    // Add any dependencies your project needs here
    testImplementation 'org.junit.jupiter:junit-jupiter:5.8.1'
}

// Configure the main class for each assignment
def runAt1 = tasks.register('runAt1', JavaExec) {
    group = 'application'
    description = 'Runs the Singleton pattern application'
    mainClass = 'tela.Tela'
    classpath = sourceSets.main.runtimeClasspath
}

def runAt2 = tasks.register('runAt2', JavaExec) {
    group = 'application'
    description = 'Runs the Adapter pattern application'
    mainClass = 'Tela.Tela'
    classpath = sourceSets.main.runtimeClasspath
}

// Default run task configuration
application {
    mainClass = 'tela.Tela' // Default to AT1's main class
}

// Test configuration
test {
    useJUnitPlatform()
}

// Ensure Java compatibility
java {
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17
}
